---

# FILE:            {{ role_path }}/tasks/backup/mydumper.yml
# LICENSE:         Public Domain

# - name: "MRM | backup | TODO message"
#   debug:
#     msg: "Work in progress"

- name: "MRM | backup | debug (requires -v, -vv, -vvv, or -vvvv)"
  debug:
    msg:
      mrm_mydumper_outputdir: "{{ mrm_mydumper_outputdir | default('undefined') }}"
      # result: "{{ (mrm_database is defined and mrm_database and mrm_database|length > 0) }}"
      # result2: "{{ (mrm_database is defined and mrm_database and mrm_database|length > 0) | ternary('_aaaaa_', '_bbbb_', '_isnull_')}}"
      # result: "{{ ((mrm_database is defined and mrm_database and mrm_database|length > 0) | ternary('_' + mrm_database + '_', '_all-databases_')) }}"
    verbosity: 1

- name: "Run prepared mydumper_command"
  shell: >
    mydumper
    --outputdir='{{ mrm_mydumper_outputdir }}'
    {{ mrm_mydumper_append | default('') }}
  register: command_result
