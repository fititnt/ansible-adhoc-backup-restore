---

# FILE:            {{ role_path }}/tasks/mode-backup.yml
# LICENSE:         Public Domain

# - name: "abr:{{ abr_mode }} | mode-backup | TODO message"
#   debug:
#     msg: "Work in progress"

- name: "abr:{{ abr_mode }} | mode-backup | setup/main.yml"
  # include: "setup/main.yml"
  include: "{{ include_task_mode_backup_setup_item }}"
  with_first_found:
    - "{{ abr_overrides_directory }}/tasks/setup/main.yml"
    - "{{ role_path }}/tasks/setup/main.yml"
  loop_control:
    loop_var: "include_task_mode_backup_setup_item"
  when:
    - "(abr_skip_setup|bool is sameas false)"

- name: "abr:{{ abr_mode }} | mode-backup | backup/main.yml"
  # include: backup/main.yml
  include: "{{ include_task_mode_backup_backup_item }}"
  with_first_found:
    - "{{ abr_overrides_directory }}/tasks/backup/main.yml"
    - "{{ role_path }}/tasks/backup/main.yml"
  loop_control:
    loop_var: "include_task_mode_backup_backup_item"

- name: "abr:{{ abr_mode }} | mode-backup | compress/main.yml"
  # include: compress/main.yml
  include: "{{ include_task_mode_backup_compress_item }}"
  with_first_found:
    - "{{ abr_overrides_directory }}/tasks/compress/main.yml"
    - "{{ role_path }}/tasks/compress/main.yml"
  loop_control:
    loop_var: "include_task_mode_backup_compress_item"

- name: "abr:{{ abr_mode }} | mode-backup | encrypt/main.yml"
  # include: encrypt/main.yml
  include: "{{ include_task_mode_backup_encrypt_item }}"
  with_first_found:
    - "{{ abr_overrides_directory }}/tasks/encrypt/main.yml"
    - "{{ role_path }}/tasks/encrypt/main.yml"
  loop_control:
    loop_var: "include_task_mode_backup_encrypt_item"

- name: "abr:{{ abr_mode }} | mode-backup | upload/main.yml"
  # include: upload/main.yml
  include: "{{ include_task_mode_backup_upload_item }}"
  with_first_found:
    - "{{ abr_overrides_directory }}/tasks/upload/main.yml"
    - "{{ role_path }}/tasks/upload/main.yml"
  loop_control:
    loop_var: "include_task_mode_backup_upload_item"

# - name: "abr:{{ abr_mode }} | mode-backup | valt-send/main.yml"
#   include: valt-send/main.yml
#   tags:
#     - valt-send
#   when:
#     - (abr_mode == "backup")
#     - (abr_valt_send_disabled|bool is sameas false)